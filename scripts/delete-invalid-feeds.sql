-- Delete all invalid RSS feeds identified by validation
-- Total: 52 feeds to be deleted

-- First, let's see what we're about to delete
SELECT COUNT(*) as total_to_delete FROM Feed WHERE id IN (
  'https://afterdinnerconversation.substack.com/feed',
  'd4676ff9-5fc4-4393-a977-05bba58ef3c1',
  '0efbd39a-9e9f-4e1c-8d37-1b43c8e9f9f7',
  '815af4b2-265f-4453-9261-e07371331294',
  '54c89bb0-0600-404d-b609-30ae98ba78eb',
  '753b00ef-9303-4bb4-a7f2-be89ec21aee0',
  '651b2e14-4473-41f3-90cf-326f753712ef',
  '94112943-f1aa-4ecc-9c03-c03125ac844b',
  '97345307-2459-4edb-b74c-b8af1e9dfa36',
  '805860c2-f893-4eea-b64b-0084939056d1',
  '57a2b446-e465-417f-b87c-e5a07a6d4c8d',
  'b9b62b34-46d0-4c48-9b38-5bffe78b3165',
  '020caead-19ce-483c-9ae1-368b3ea1373a',
  '819fb73e-5b2c-4b75-a64d-02061b7f17b3',
  'f7e6cb77-0696-4f94-a66c-43ee47a4789b',
  '26602075-f14a-4c93-8172-d07f2ff5c5fb',
  '2d3ae595-94ee-4af8-8af5-3b758fafb6e1',
  '12e78875-7534-483e-a6cf-8d745f24c052',
  '6a05b4c1-b934-4f19-bc94-db2b2c8449e5',
  'cb594e9a-60f4-43d3-9771-e6220d53cc4a',
  'bfe376c9-77fb-4b6c-8da8-29f449dd9de6',
  '3157852a-b7fa-451e-96fb-081eef9c204c',
  '05e8daa9-5c7a-496f-af61-e2eb4c46546a',
  '5a72a7db-c954-4391-b417-b742bbfe4e47',
  '2af34044-bd71-4bac-9616-dddd4b36fe98',
  '8a850904-e1f4-401a-8bba-78c1af2a16b4',
  'b0dbbc33-984f-4f60-ab98-54df4906fbd3',
  'ffdab756-d25b-4aa5-953e-1aa7d88ab44a',
  'b3a4b28d-d0ec-486b-8caf-330c97c55f06',
  'b549f441-90f7-4150-9df8-e2174b9d94f2',
  '1f38bc38-86e6-40cd-9aaa-31ffd8b82a00',
  '08268b1c-1880-4728-ba4a-2a44b534c52d',
  'c85f8b93-97c3-4355-abcb-e4d004618297',
  '5444c9fd-b951-49ae-af68-ddab6670f75f',
  '00f118c1-e192-4cc3-b592-d7f995de3401',
  '7c1278fc-9da2-46b8-9d76-9c04676d9b25',
  '31a309e1-ba1c-48ee-ac9a-335a5cacaac2',
  '0e3e9116-2f06-41d6-9ce0-10d6215c6746',
  'e42b0565-0689-4a6d-b9a8-d4699d9203cd',
  'ea1e46f9-93c0-4d3d-beed-24da5dc7c9df',
  '062cf8d8-01b7-4c6d-832b-ddd365c17567',
  '8a89b4b0-2cf1-485f-841b-d4db7c5d39c9',
  'd4520b75-5535-473e-bf9d-857a9871a7fd',
  '0a9ec2a0-f30d-4899-99e5-748e306bf043',
  '311b1b2b-4597-4142-858a-0a311b1ffec3',
  '682637e6-5237-4bf1-a2ff-a96841c9faea',
  'a16c908b-2f1e-4a7a-9c98-2dfeb0711f49',
  'f21f908f-0073-4e13-b79d-b365c1152f6e',
  '89148e55-6813-4f18-8237-87266cb555cc',
  '531ffe0d-1afb-43a7-82ab-e3f2637ba1d4',
  '2682102f-950c-4f44-bee9-96e68ac3629d',
  '581ebe76-8549-4c6a-a775-ba676597e985'
);

-- Delete associated records first (due to foreign key constraints)
-- Delete from ArticleSummaryRelation
DELETE FROM ArticleSummaryRelation 
WHERE articleId IN (
  SELECT id FROM Article WHERE feedId IN (
    'https://afterdinnerconversation.substack.com/feed',
    'd4676ff9-5fc4-4393-a977-05bba58ef3c1',
    '0efbd39a-9e9f-4e1c-8d37-1b43c8e9f9f7',
    '815af4b2-265f-4453-9261-e07371331294',
    '54c89bb0-0600-404d-b609-30ae98ba78eb',
    '753b00ef-9303-4bb4-a7f2-be89ec21aee0',
    '651b2e14-4473-41f3-90cf-326f753712ef',
    '94112943-f1aa-4ecc-9c03-c03125ac844b',
    '97345307-2459-4edb-b74c-b8af1e9dfa36',
    '805860c2-f893-4eea-b64b-0084939056d1',
    '57a2b446-e465-417f-b87c-e5a07a6d4c8d',
    'b9b62b34-46d0-4c48-9b38-5bffe78b3165',
    '020caead-19ce-483c-9ae1-368b3ea1373a',
    '819fb73e-5b2c-4b75-a64d-02061b7f17b3',
    'f7e6cb77-0696-4f94-a66c-43ee47a4789b',
    '26602075-f14a-4c93-8172-d07f2ff5c5fb',
    '2d3ae595-94ee-4af8-8af5-3b758fafb6e1',
    '12e78875-7534-483e-a6cf-8d745f24c052',
    '6a05b4c1-b934-4f19-bc94-db2b2c8449e5',
    'cb594e9a-60f4-43d3-9771-e6220d53cc4a',
    'bfe376c9-77fb-4b6c-8da8-29f449dd9de6',
    '3157852a-b7fa-451e-96fb-081eef9c204c',
    '05e8daa9-5c7a-496f-af61-e2eb4c46546a',
    '5a72a7db-c954-4391-b417-b742bbfe4e47',
    '2af34044-bd71-4bac-9616-dddd4b36fe98',
    '8a850904-e1f4-401a-8bba-78c1af2a16b4',
    'b0dbbc33-984f-4f60-ab98-54df4906fbd3',
    'ffdab756-d25b-4aa5-953e-1aa7d88ab44a',
    'b3a4b28d-d0ec-486b-8caf-330c97c55f06',
    'b549f441-90f7-4150-9df8-e2174b9d94f2',
    '1f38bc38-86e6-40cd-9aaa-31ffd8b82a00',
    '08268b1c-1880-4728-ba4a-2a44b534c52d',
    'c85f8b93-97c3-4355-abcb-e4d004618297',
    '5444c9fd-b951-49ae-af68-ddab6670f75f',
    '00f118c1-e192-4cc3-b592-d7f995de3401',
    '7c1278fc-9da2-46b8-9d76-9c04676d9b25',
    '31a309e1-ba1c-48ee-ac9a-335a5cacaac2',
    '0e3e9116-2f06-41d6-9ce0-10d6215c6746',
    'e42b0565-0689-4a6d-b9a8-d4699d9203cd',
    'ea1e46f9-93c0-4d3d-beed-24da5dc7c9df',
    '062cf8d8-01b7-4c6d-832b-ddd365c17567',
    '8a89b4b0-2cf1-485f-841b-d4db7c5d39c9',
    'd4520b75-5535-473e-bf9d-857a9871a7fd',
    '0a9ec2a0-f30d-4899-99e5-748e306bf043',
    '311b1b2b-4597-4142-858a-0a311b1ffec3',
    '682637e6-5237-4bf1-a2ff-a96841c9faea',
    'a16c908b-2f1e-4a7a-9c98-2dfeb0711f49',
    'f21f908f-0073-4e13-b79d-b365c1152f6e',
    '89148e55-6813-4f18-8237-87266cb555cc',
    '531ffe0d-1afb-43a7-82ab-e3f2637ba1d4',
    '2682102f-950c-4f44-bee9-96e68ac3629d',
    '581ebe76-8549-4c6a-a775-ba676597e985'
  )
);

-- Delete from FeedGroupFeed
DELETE FROM FeedGroupFeed WHERE feedId IN (
  'https://afterdinnerconversation.substack.com/feed',
  'd4676ff9-5fc4-4393-a977-05bba58ef3c1',
  '0efbd39a-9e9f-4e1c-8d37-1b43c8e9f9f7',
  '815af4b2-265f-4453-9261-e07371331294',
  '54c89bb0-0600-404d-b609-30ae98ba78eb',
  '753b00ef-9303-4bb4-a7f2-be89ec21aee0',
  '651b2e14-4473-41f3-90cf-326f753712ef',
  '94112943-f1aa-4ecc-9c03-c03125ac844b',
  '97345307-2459-4edb-b74c-b8af1e9dfa36',
  '805860c2-f893-4eea-b64b-0084939056d1',
  '57a2b446-e465-417f-b87c-e5a07a6d4c8d',
  'b9b62b34-46d0-4c48-9b38-5bffe78b3165',
  '020caead-19ce-483c-9ae1-368b3ea1373a',
  '819fb73e-5b2c-4b75-a64d-02061b7f17b3',
  'f7e6cb77-0696-4f94-a66c-43ee47a4789b',
  '26602075-f14a-4c93-8172-d07f2ff5c5fb',
  '2d3ae595-94ee-4af8-8af5-3b758fafb6e1',
  '12e78875-7534-483e-a6cf-8d745f24c052',
  '6a05b4c1-b934-4f19-bc94-db2b2c8449e5',
  'cb594e9a-60f4-43d3-9771-e6220d53cc4a',
  'bfe376c9-77fb-4b6c-8da8-29f449dd9de6',
  '3157852a-b7fa-451e-96fb-081eef9c204c',
  '05e8daa9-5c7a-496f-af61-e2eb4c46546a',
  '5a72a7db-c954-4391-b417-b742bbfe4e47',
  '2af34044-bd71-4bac-9616-dddd4b36fe98',
  '8a850904-e1f4-401a-8bba-78c1af2a16b4',
  'b0dbbc33-984f-4f60-ab98-54df4906fbd3',
  'ffdab756-d25b-4aa5-953e-1aa7d88ab44a',
  'b3a4b28d-d0ec-486b-8caf-330c97c55f06',
  'b549f441-90f7-4150-9df8-e2174b9d94f2',
  '1f38bc38-86e6-40cd-9aaa-31ffd8b82a00',
  '08268b1c-1880-4728-ba4a-2a44b534c52d',
  'c85f8b93-97c3-4355-abcb-e4d004618297',
  '5444c9fd-b951-49ae-af68-ddab6670f75f',
  '00f118c1-e192-4cc3-b592-d7f995de3401',
  '7c1278fc-9da2-46b8-9d76-9c04676d9b25',
  '31a309e1-ba1c-48ee-ac9a-335a5cacaac2',
  '0e3e9116-2f06-41d6-9ce0-10d6215c6746',
  'e42b0565-0689-4a6d-b9a8-d4699d9203cd',
  'ea1e46f9-93c0-4d3d-beed-24da5dc7c9df',
  '062cf8d8-01b7-4c6d-832b-ddd365c17567',
  '8a89b4b0-2cf1-485f-841b-d4db7c5d39c9',
  'd4520b75-5535-473e-bf9d-857a9871a7fd',
  '0a9ec2a0-f30d-4899-99e5-748e306bf043',
  '311b1b2b-4597-4142-858a-0a311b1ffec3',
  '682637e6-5237-4bf1-a2ff-a96841c9faea',
  'a16c908b-2f1e-4a7a-9c98-2dfeb0711f49',
  'f21f908f-0073-4e13-b79d-b365c1152f6e',
  '89148e55-6813-4f18-8237-87266cb555cc',
  '531ffe0d-1afb-43a7-82ab-e3f2637ba1d4',
  '2682102f-950c-4f44-bee9-96e68ac3629d',
  '581ebe76-8549-4c6a-a775-ba676597e985'
);

-- Delete articles from these feeds
DELETE FROM Article WHERE feedId IN (
  'https://afterdinnerconversation.substack.com/feed',
  'd4676ff9-5fc4-4393-a977-05bba58ef3c1',
  '0efbd39a-9e9f-4e1c-8d37-1b43c8e9f9f7',
  '815af4b2-265f-4453-9261-e07371331294',
  '54c89bb0-0600-404d-b609-30ae98ba78eb',
  '753b00ef-9303-4bb4-a7f2-be89ec21aee0',
  '651b2e14-4473-41f3-90cf-326f753712ef',
  '94112943-f1aa-4ecc-9c03-c03125ac844b',
  '97345307-2459-4edb-b74c-b8af1e9dfa36',
  '805860c2-f893-4eea-b64b-0084939056d1',
  '57a2b446-e465-417f-b87c-e5a07a6d4c8d',
  'b9b62b34-46d0-4c48-9b38-5bffe78b3165',
  '020caead-19ce-483c-9ae1-368b3ea1373a',
  '819fb73e-5b2c-4b75-a64d-02061b7f17b3',
  'f7e6cb77-0696-4f94-a66c-43ee47a4789b',
  '26602075-f14a-4c93-8172-d07f2ff5c5fb',
  '2d3ae595-94ee-4af8-8af5-3b758fafb6e1',
  '12e78875-7534-483e-a6cf-8d745f24c052',
  '6a05b4c1-b934-4f19-bc94-db2b2c8449e5',
  'cb594e9a-60f4-43d3-9771-e6220d53cc4a',
  'bfe376c9-77fb-4b6c-8da8-29f449dd9de6',
  '3157852a-b7fa-451e-96fb-081eef9c204c',
  '05e8daa9-5c7a-496f-af61-e2eb4c46546a',
  '5a72a7db-c954-4391-b417-b742bbfe4e47',
  '2af34044-bd71-4bac-9616-dddd4b36fe98',
  '8a850904-e1f4-401a-8bba-78c1af2a16b4',
  'b0dbbc33-984f-4f60-ab98-54df4906fbd3',
  'ffdab756-d25b-4aa5-953e-1aa7d88ab44a',
  'b3a4b28d-d0ec-486b-8caf-330c97c55f06',
  'b549f441-90f7-4150-9df8-e2174b9d94f2',
  '1f38bc38-86e6-40cd-9aaa-31ffd8b82a00',
  '08268b1c-1880-4728-ba4a-2a44b534c52d',
  'c85f8b93-97c3-4355-abcb-e4d004618297',
  '5444c9fd-b951-49ae-af68-ddab6670f75f',
  '00f118c1-e192-4cc3-b592-d7f995de3401',
  '7c1278fc-9da2-46b8-9d76-9c04676d9b25',
  '31a309e1-ba1c-48ee-ac9a-335a5cacaac2',
  '0e3e9116-2f06-41d6-9ce0-10d6215c6746',
  'e42b0565-0689-4a6d-b9a8-d4699d9203cd',
  'ea1e46f9-93c0-4d3d-beed-24da5dc7c9df',
  '062cf8d8-01b7-4c6d-832b-ddd365c17567',
  '8a89b4b0-2cf1-485f-841b-d4db7c5d39c9',
  'd4520b75-5535-473e-bf9d-857a9871a7fd',
  '0a9ec2a0-f30d-4899-99e5-748e306bf043',
  '311b1b2b-4597-4142-858a-0a311b1ffec3',
  '682637e6-5237-4bf1-a2ff-a96841c9faea',
  'a16c908b-2f1e-4a7a-9c98-2dfeb0711f49',
  'f21f908f-0073-4e13-b79d-b365c1152f6e',
  '89148e55-6813-4f18-8237-87266cb555cc',
  '531ffe0d-1afb-43a7-82ab-e3f2637ba1d4',
  '2682102f-950c-4f44-bee9-96e68ac3629d',
  '581ebe76-8549-4c6a-a775-ba676597e985'
);

-- Finally delete the feeds themselves
DELETE FROM Feed WHERE id IN (
  'https://afterdinnerconversation.substack.com/feed',
  'd4676ff9-5fc4-4393-a977-05bba58ef3c1',
  '0efbd39a-9e9f-4e1c-8d37-1b43c8e9f9f7',
  '815af4b2-265f-4453-9261-e07371331294',
  '54c89bb0-0600-404d-b609-30ae98ba78eb',
  '753b00ef-9303-4bb4-a7f2-be89ec21aee0',
  '651b2e14-4473-41f3-90cf-326f753712ef',
  '94112943-f1aa-4ecc-9c03-c03125ac844b',
  '97345307-2459-4edb-b74c-b8af1e9dfa36',
  '805860c2-f893-4eea-b64b-0084939056d1',
  '57a2b446-e465-417f-b87c-e5a07a6d4c8d',
  'b9b62b34-46d0-4c48-9b38-5bffe78b3165',
  '020caead-19ce-483c-9ae1-368b3ea1373a',
  '819fb73e-5b2c-4b75-a64d-02061b7f17b3',
  'f7e6cb77-0696-4f94-a66c-43ee47a4789b',
  '26602075-f14a-4c93-8172-d07f2ff5c5fb',
  '2d3ae595-94ee-4af8-8af5-3b758fafb6e1',
  '12e78875-7534-483e-a6cf-8d745f24c052',
  '6a05b4c1-b934-4f19-bc94-db2b2c8449e5',
  'cb594e9a-60f4-43d3-9771-e6220d53cc4a',
  'bfe376c9-77fb-4b6c-8da8-29f449dd9de6',
  '3157852a-b7fa-451e-96fb-081eef9c204c',
  '05e8daa9-5c7a-496f-af61-e2eb4c46546a',
  '5a72a7db-c954-4391-b417-b742bbfe4e47',
  '2af34044-bd71-4bac-9616-dddd4b36fe98',
  '8a850904-e1f4-401a-8bba-78c1af2a16b4',
  'b0dbbc33-984f-4f60-ab98-54df4906fbd3',
  'ffdab756-d25b-4aa5-953e-1aa7d88ab44a',
  'b3a4b28d-d0ec-486b-8caf-330c97c55f06',
  'b549f441-90f7-4150-9df8-e2174b9d94f2',
  '1f38bc38-86e6-40cd-9aaa-31ffd8b82a00',
  '08268b1c-1880-4728-ba4a-2a44b534c52d',
  'c85f8b93-97c3-4355-abcb-e4d004618297',
  '5444c9fd-b951-49ae-af68-ddab6670f75f',
  '00f118c1-e192-4cc3-b592-d7f995de3401',
  '7c1278fc-9da2-46b8-9d76-9c04676d9b25',
  '31a309e1-ba1c-48ee-ac9a-335a5cacaac2',
  '0e3e9116-2f06-41d6-9ce0-10d6215c6746',
  'e42b0565-0689-4a6d-b9a8-d4699d9203cd',
  'ea1e46f9-93c0-4d3d-beed-24da5dc7c9df',
  '062cf8d8-01b7-4c6d-832b-ddd365c17567',
  '8a89b4b0-2cf1-485f-841b-d4db7c5d39c9',
  'd4520b75-5535-473e-bf9d-857a9871a7fd',
  '0a9ec2a0-f30d-4899-99e5-748e306bf043',
  '311b1b2b-4597-4142-858a-0a311b1ffec3',
  '682637e6-5237-4bf1-a2ff-a96841c9faea',
  'a16c908b-2f1e-4a7a-9c98-2dfeb0711f49',
  'f21f908f-0073-4e13-b79d-b365c1152f6e',
  '89148e55-6813-4f18-8237-87266cb555cc',
  '531ffe0d-1afb-43a7-82ab-e3f2637ba1d4',
  '2682102f-950c-4f44-bee9-96e68ac3629d',
  '581ebe76-8549-4c6a-a775-ba676597e985'
);

-- Verify the deletion
SELECT COUNT(*) as remaining_feeds FROM Feed;